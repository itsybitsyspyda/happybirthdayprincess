<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Happy Birthday Princess</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=MedievalSharp&display=swap"
        rel="stylesheet">
    <link rel="icon" href="data:image/svg+xml,
<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'>
<text y='0.9em' font-size='90'>üìú</text>
</svg>">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Cinzel', serif;
            background-color: #1a0f0a;
            background-image: url('https://www.transparenttextures.com/patterns/wood-pattern.png');
            color: #3d2b1f;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 20px;
            overflow-x: hidden;
            transition: background-color 1s ease, background-image 1s ease;
        }

        body.night-mode {
            background-color: #0a0502;
            background-image: url('https://www.transparenttextures.com/patterns/dark-wood.png');
        }

        /* Password screen */
        .password-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(26, 15, 10, 0.95);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 100;
            transition: opacity 0.8s ease, background-color 1s ease;
        }

        body.night-mode .password-screen {
            background-color: rgba(10, 5, 2, 0.95);
        }

        .password-screen.hidden {
            opacity: 0;
            pointer-events: none;
        }

        .lock-container {
            background-color: #2d1b12;
            padding: 40px;
            border-radius: 10px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.7);
            text-align: center;
            border: 2px solid #5d4037;
            max-width: 500px;
            width: 90%;
            position: relative;
        }

        body.night-mode .lock-container {
            background-color: #1a0f0a;
            border-color: #8b6b4a;
        }

        .lock-icon {
            font-size: 60px;
            color: #8b6b4a;
            margin-bottom: 20px;
        }

        .time-greeting {
            font-family: 'MedievalSharp', cursive;
            margin-bottom: 10px;
            font-size: 2.2rem;
        }

        .morning-greeting {
            color: #d7b899;
            text-shadow: 0 0 10px rgba(255, 215, 0, 0.3);
        }

        .afternoon-greeting {
            color: #ffcc66;
            text-shadow: 0 0 10px rgba(255, 165, 0, 0.3);
        }

        .evening-greeting {
            color: #b8946f;
            text-shadow: 0 0 10px rgba(184, 148, 111, 0.3);
        }

        .night-greeting {
            color: #8b6b4a;
            text-shadow: 0 0 10px rgba(139, 107, 74, 0.3);
        }

        .password-instruction {
            color: #b8946f;
            margin-bottom: 25px;
            font-size: 1.1rem;
            line-height: 1.5;
        }

        .password-form {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 15px;
            width: 100%;
        }

        .password-input {
            padding: 15px;
            width: 100%;
            max-width: 300px;
            background-color: #3d2b1f;
            border: 2px solid #8b6b4a;
            border-radius: 5px;
            color: #e8d6c3;
            font-size: 1.1rem;
            text-align: center;
            font-family: 'Cinzel', serif;
            letter-spacing: 1px;
            transition: all 0.3s;
        }

        body.night-mode .password-input {
            background-color: #0a0502;
            border-color: #b8946f;
        }

        .password-input:focus {
            outline: none;
            border-color: #d7b899;
            box-shadow: 0 0 10px rgba(215, 184, 153, 0.3);
        }

        .password-input::placeholder {
            color: #a0866f;
        }

        .submit-btn {
            padding: 15px 30px;
            background-color: #5d4037;
            color: #e8d6c3;
            border: none;
            border-radius: 5px;
            font-family: 'Cinzel', serif;
            font-size: 1.1rem;
            cursor: pointer;
            transition: all 0.3s;
            border: 1px solid #8b6b4a;
        }

        .submit-btn:hover {
            background-color: #8b6b4a;
            transform: translateY(-2px);
        }

        .error-message {
            color: #c97a6a;
            margin-top: 10px;
            height: 20px;
            font-size: 0.9rem;
        }

        .hint {
            color: #a0866f;
            font-size: 0.9rem;
            margin-top: 20px;
        }

        /* Candles on password screen */
        .password-candles {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 30px;
            flex-wrap: wrap;
        }

        .password-candle {
            position: relative;
            width: 18px;
            height: 50px;
            background: linear-gradient(to right, #8b6b4a, #5d4037, #8b6b4a);
            border-radius: 3px;
            opacity: 0.7;
            transition: all 0.5s ease;
        }

        .password-candle.lit {
            opacity: 1;
            background: linear-gradient(to right, #d7b899, #b8946f, #d7b899);
        }

        .password-candle::before {
            content: '';
            position: absolute;
            top: -12px;
            left: 50%;
            transform: translateX(-50%);
            width: 22px;
            height: 8px;
            background-color: #5d4037;
            border-radius: 50% 50% 40% 40%;
            transition: all 0.5s ease;
        }

        .password-candle.lit::before {
            background-color: #d7b899;
        }

        .password-flame {
            position: absolute;
            top: -30px;
            left: 50%;
            transform: translateX(-50%);
            width: 12px;
            height: 20px;
            background: linear-gradient(to bottom, #ffdd00, #ff6b00, #ff3300);
            border-radius: 50% 50% 20% 20%;
            opacity: 0;
            box-shadow: 0 0 15px rgba(255, 107, 0, 0.7),
                0 0 30px rgba(255, 107, 0, 0.4);
            animation: flicker 0.5s infinite alternate;
            transition: opacity 0.5s ease;
        }

        .password-candle.lit .password-flame {
            opacity: 1;
        }

        @keyframes flicker {

            0%,
            100% {
                transform: translateX(-50%) scale(1);
                height: 20px;
            }

            50% {
                transform: translateX(-50%) scale(1.05);
                height: 22px;
            }
        }

        /* Scroll container */
        .scroll-container {
            position: relative;
            width: 90%;
            max-width: 900px;
            margin: 0 auto;
        }

        .scroll {
            position: relative;
            width: 100%;
            min-height: 600px;
            background-color: #f2e4c9;
            background-image: url('https://www.transparenttextures.com/patterns/parchment.png');
            border-radius: 5px;
            padding: 80px 60px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.7),
                inset 0 0 50px rgba(139, 107, 74, 0.2);
            border: 15px solid transparent;
            border-image: url('https://www.transparenttextures.com/patterns/wood-pattern.png') 30 stretch;
            transform: scaleY(0.95);
            transition: all 1.2s ease;
            opacity: 0;
            overflow: hidden;
        }

        body.night-mode .scroll {
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.9),
                0 0 20px rgba(215, 184, 153, 0.1),
                inset 0 0 50px rgba(139, 107, 74, 0.1);
        }

        .scroll.unrolled {
            transform: scaleY(1);
            opacity: 1;
        }

        .scroll-top,
        .scroll-bottom {
            position: absolute;
            width: 120%;
            height: 50px;
            background-color: #8b6b4a;
            background-image: url('https://www.transparenttextures.com/patterns/wood-pattern.png');
            left: -10%;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.5);
            z-index: 3;
        }

        .scroll-top {
            top: -20px;
            border-radius: 50% 50% 0 0;
        }

        .scroll-bottom {
            bottom: -20px;
            border-radius: 0 0 50% 50%;
        }

        .scroll-top::before,
        .scroll-bottom::before {
            content: '';
            position: absolute;
            width: 100%;
            height: 20px;
            background-color: #5d4037;
            top: 50%;
            left: 0;
            transform: translateY(-50%);
        }

        /* Scroll content */
        .scroll-content {
            position: relative;
            z-index: 2;
            text-align: center;
            opacity: 0;
            transform: translateY(30px);
            transition: all 1s ease 0.5s;
        }

        .scroll.unrolled .scroll-content {
            opacity: 1;
            transform: translateY(0);
        }

        .scroll-title {
            font-family: 'MedievalSharp', cursive;
            font-size: 3.5rem;
            color: #5d4037;
            margin-bottom: 20px;
            text-shadow: 2px 2px 4px rgba(93, 64, 55, 0.2);
        }

        .divider {
            height: 3px;
            background: linear-gradient(to right, transparent, #8b6b4a, transparent);
            margin: 30px auto;
            width: 80%;
        }

        .birthday-message {
            font-size: 1.3rem;
            line-height: 1.8;
            margin-bottom: 30px;
            text-align: left;
            color: #3d2b1f;
        }

        .initial {
            font-size: 2.5rem;
            color: #5d4037;
            font-family: 'MedievalSharp', cursive;
            float: left;
            margin-right: 10px;
            line-height: 1;
        }

        .signature {
            font-family: 'MedievalSharp', cursive;
            font-size: 2rem;
            color: #5d4037;
            margin-top: 50px;
            text-align: right;
        }

        .seal {
            position: absolute;
            bottom: 40px;
            left: 40px;
            width: 80px;
            height: 80px;
            background-color: #8b6b4a;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            color: #f2e4c9;
            font-size: 1.8rem;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.3);
            border: 3px solid #5d4037;
            font-family: 'MedievalSharp', cursive;
            z-index: 2;
        }

        /* Controls panel */
        .controls-panel {
            position: fixed;
            top: 20px;
            right: 20px;
            display: flex;
            gap: 10px;
            z-index: 50;
        }

        .control-btn {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background-color: rgba(93, 64, 55, 0.8);
            border: 2px solid #8b6b4a;
            color: #e8d6c3;
            font-size: 1.2rem;
            cursor: pointer;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: all 0.3s;
            backdrop-filter: blur(5px);
        }

        .control-btn:hover {
            background-color: rgba(139, 107, 74, 0.9);
            transform: scale(1.1);
        }

        .control-btn.active {
            background-color: #8b6b4a;
            box-shadow: 0 0 15px rgba(215, 184, 153, 0.5);
        }

        /* Share modal */
        .share-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 200;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s ease;
        }

        .share-modal.active {
            opacity: 1;
            pointer-events: all;
        }

        .share-container {
            background-color: #2d1b12;
            padding: 40px;
            border-radius: 10px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.7);
            text-align: center;
            border: 2px solid #5d4037;
            max-width: 500px;
            width: 90%;
            transform: translateY(-20px);
            transition: transform 0.3s ease;
        }

        .share-modal.active .share-container {
            transform: translateY(0);
        }

        .share-title {
            color: #d7b899;
            font-family: 'MedievalSharp', cursive;
            margin-bottom: 20px;
            font-size: 1.8rem;
        }

        .share-buttons {
            display: flex;
            justify-content: center;
            gap: 15px;
            flex-wrap: wrap;
            margin-top: 20px;
        }

        .share-btn {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
            transition: all 0.3s;
        }

        .share-btn:hover {
            transform: scale(1.1) translateY(-5px);
        }

        .share-btn.instagram {
            background: linear-gradient(45deg, #405DE6, #5851DB, #833AB4, #C13584, #E1306C, #FD1D1D);
        }

        .share-btn.snapchat {
            background-color: #FFFC00;
            color: #000;
        }

        .share-btn.whatsapp {
            background-color: #25d366;
        }

        .share-btn.link {
            background-color: #8b6b4a;
        }

        .close-share {
            position: absolute;
            top: 15px;
            right: 15px;
            background: none;
            border: none;
            color: #b8946f;
            font-size: 1.5rem;
            cursor: pointer;
        }

        /* Instructions */
        .instructions {
            color: #b8946f;
            text-align: center;
            margin-top: 30px;
            font-size: 1.1rem;
            max-width: 600px;
            padding: 0 20px;
        }

        .instructions p {
            margin-bottom: 10px;
        }

        /* Time indicator */
        .time-indicator {
            color: #8b6b4a;
            font-size: 0.9rem;
            margin-top: 10px;
            font-style: italic;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .scroll {
                padding: 60px 30px;
                min-height: 500px;
            }

            .scroll-title {
                font-size: 2.5rem;
            }

            .birthday-message {
                font-size: 1.1rem;
                line-height: 1.6;
            }

            .lock-container {
                padding: 30px 20px;
            }

            .signature {
                font-size: 1.6rem;
                margin-top: 30px;
            }

            .controls-panel {
                top: 15px;
                right: 15px;
                gap: 8px;
            }

            .control-btn {
                width: 45px;
                height: 45px;
                font-size: 1.1rem;
            }

            .share-btn {
                width: 55px;
                height: 55px;
                font-size: 1.3rem;
            }

            .time-greeting {
                font-size: 1.8rem;
            }
        }

        @media (max-width: 480px) {
            .scroll {
                padding: 50px 20px;
                min-height: 450px;
            }

            .scroll-title {
                font-size: 2rem;
            }

            .birthday-message {
                font-size: 1rem;
                line-height: 1.5;
            }

            .lock-icon {
                font-size: 50px;
            }

            .time-greeting {
                font-size: 1.6rem;
            }

            .signature {
                font-size: 1.4rem;
                margin-top: 20px;
            }

            .seal {
                width: 60px;
                height: 60px;
                font-size: 1.4rem;
                bottom: 30px;
                left: 30px;
            }

            .password-candles {
                gap: 15px;
            }

            .password-candle {
                width: 16px;
                height: 45px;
            }

            .controls-panel {
                top: 10px;
                right: 10px;
                flex-direction: column;
                gap: 5px;
            }

            .control-btn {
                width: 40px;
                height: 40px;
                font-size: 1rem;
            }

            .instructions {
                font-size: 0.9rem;
            }

            body {
                padding: 15px;
            }
        }

        @media (max-width: 360px) {
            .scroll {
                padding: 40px 15px;
                min-height: 400px;
            }

            .password-candles {
                gap: 12px;
            }

            .password-candle {
                width: 14px;
                height: 40px;
            }

            .time-greeting {
                font-size: 1.4rem;
            }
        }
    </style>
</head>

<body>
    <!-- Password Screen -->
    <div class="password-screen" id="passwordScreen">
        <div class="lock-container">
            <div class="lock-icon">üîí</div>
            <h1 class="time-greeting" id="timeGreeting">Secret Birthday Scroll</h1>
            <p class="password-instruction">To unseal this missive of years long kept secret, thou must utter the hidden
                word,
                known only to the soul for whom this day was
                born.</p>

            <form class="password-form" id="passwordForm">
                <input type="password" class="password-input" id="passwordInput" placeholder="Whisper the hidden words"
                    required>
                <button type="submit" class="submit-btn">Unlock Scroll</button>
                <div class="error-message" id="errorMessage"></div>
            </form>

            <!-- Birthday candles -->
            <div class="password-candles" id="passwordCandles">
                <!-- Candles will be added by JavaScript -->
            </div>

            <!--
            <p class="hint">Hint: The password is the birthday person's name (lowercase)</p>
            -->
            <p class="time-indicator" id="timeIndicator"></p>
        </div>
    </div>

    <!-- Controls Panel -->
    <div class="controls-panel" id="controlsPanel">
        <button class="control-btn" id="dayNightBtn" title="Night Mode">
            <i class="fas fa-moon"></i>
        </button>
        <button class="control-btn" id="musicBtn" title="Music">
            <i class="fas fa-volume-up"></i>
        </button>
        <button class="control-btn" id="shareBtn" title="Share">
            <i class="fas fa-share-alt"></i>
        </button>
    </div>

    <!-- Share Modal -->
    <div class="share-modal" id="shareModal">
        <div class="share-container">
            <button class="close-share" id="closeShare">&times;</button>
            <h2 class="share-title">Share</h2>
            <p style="color: #b8946f; margin-bottom: 20px;"></p>

            <div class="share-buttons">
                <div class="share-btn instagram" id="shareInstagram" title="Share on Instagram">
                    <i class="fab fa-instagram"></i>
                </div>
                <div class="share-btn snapchat" id="shareSnapchat" title="Share on Snapchat">
                    <i class="fab fa-snapchat-ghost"></i>
                </div>
                <div class="share-btn whatsapp" id="shareWhatsApp" title="Share on WhatsApp">
                    <i class="fab fa-whatsapp"></i>
                </div>
                <div class="share-btn link" id="copyLink" title="Copy Link">
                    <i class="fas fa-link"></i>
                </div>
            </div>

            <p id="copyMessage" style="color: #8b6b4a; margin-top: 20px; height: 20px;"></p>
        </div>
    </div>

    <!-- Scroll Container -->
    <div class="scroll-container" id="scrollContainer">
        <div class="scroll" id="scroll">
            <div class="scroll-top"></div>
            <div class="scroll-content">
                <h1 class="scroll-title">A Royal Proclamation</h1>

                <div class="divider"></div>

                <div class="birthday-message">
                    <span class="initial">H</span>ear ye, hear ye! Let it be known throughout the realm that on this
                    most auspicious day, we gather to celebrate the birth of one truly blessed. As the stars align and
                    the seasons turn, we mark the passage of another year in the life of Princess Chelsie.

                    <br><br>

                    May fortune smile upon you, may joy be your constant companion, and may the year ahead be filled
                    with adventures grand and memories cherished. Let the minstrels sing of your kindness, let the bards
                    recount your triumphs, and let the kingdom feast in your honor.

                    <br><br>

                    From the break of dawn till the moon doth rise, may this day be filled with merriment, laughter, and
                    the warmth of my love to you. Receive these wishes, inscribed upon this ancient parchment, as tokens
                    of
                    esteem from I who hold you dear.

                    <br><br>

                    As candles flicker upon the celebratory cake, so too does my affection burn brightly for you. May
                    your path be illuminated with happiness, your heart be light, and your days be long and prosperous.
                </div>

                <div class="divider"></div>

                <div class="signature">Written in honor,<br>‡¶è‚ÄãDave„ÉÑ </div>
            </div>

            <div class="scroll-bottom"></div>
            <!--
             <div class="seal">B</div>
        -->
        </div>
    </div>

    <!--
    <div class="instructions">
        <p>The ancient scroll has been unveiled for the birthday celebration!</p>
        <p>Use the controls above to toggle night mode or share this special message.</p>
    </div>
 -->

    <!-- Audio for background music -->
    <audio id="backgroundMusic" loop autoplay>
        <!-- Using a free medieval ambiance track -->
        <source src="Rewrite the Stars (Piano Instrumental)_spotdown.org.mp3" type="audio/mpeg">
    </audio>

    <script>
        // Function to get time-based greeting
        function getTimeBasedGreeting() {
            const hour = new Date().getHours();
            let greeting, greetingClass, timeOfDay;

            if (hour >= 5 && hour < 12) {
                greeting = "Good Morning";
                greetingClass = "morning-greeting";
                timeOfDay = "morning";
            } else if (hour >= 12 && hour < 17) {
                greeting = "Good Afternoon ";
                greetingClass = "afternoon-greeting";
                timeOfDay = "afternoon";
            } else if (hour >= 17 && hour < 21) {
                greeting = "Good Evening";
                greetingClass = "evening-greeting";
                timeOfDay = "evening";
            } else {
                greeting = "Good Night";
                greetingClass = "night-greeting";
                timeOfDay = "night";
            }

            return { greeting, greetingClass, timeOfDay };
        }

        // Function to update time indicator
        function updateTimeIndicator() {
            const now = new Date();
            const options = {
                weekday: 'long',
                year: 'numeric',
                month: 'long',
                day: 'numeric',
                hour: '2-digit',
                minute: '2-digit'
            };
            const timeString = now.toLocaleDateString('en-US', options);
            return timeString;
        }

        // DOM elements
        const passwordScreen = document.getElementById('passwordScreen');
        const passwordForm = document.getElementById('passwordForm');
        const passwordInput = document.getElementById('passwordInput');
        const errorMessage = document.getElementById('errorMessage');
        const scroll = document.getElementById('scroll');
        const passwordCandles = document.getElementById('passwordCandles');
        const backgroundMusic = document.getElementById('backgroundMusic');
        const dayNightBtn = document.getElementById('dayNightBtn');
        const shareBtn = document.getElementById('shareBtn');
        const shareModal = document.getElementById('shareModal');
        const closeShare = document.getElementById('closeShare');
        const shareInstagram = document.getElementById('shareInstagram');
        const shareSnapchat = document.getElementById('shareSnapchat');
        const shareWhatsApp = document.getElementById('shareWhatsApp');
        const copyLink = document.getElementById('copyLink');
        const copyMessage = document.getElementById('copyMessage');
        const controlsPanel = document.getElementById('controlsPanel');
        const timeGreeting = document.getElementById('timeGreeting');
        const timeIndicator = document.getElementById('timeIndicator');

        // Set time-based greeting on page load
        function setTimeGreeting() {
            const { greeting, greetingClass, timeOfDay } = getTimeBasedGreeting();
            const timeString = updateTimeIndicator();

            // Update greeting text and class
            timeGreeting.textContent = greeting;
            timeGreeting.className = `time-greeting ${greetingClass}`;

            // Update time indicator
            timeIndicator.textContent = timeString;

            // Set page title based on time of day
            document.title = `${greeting} - Ancient Birthday Scroll`;

            // If it's night time, automatically switch to night mode
            if (timeOfDay === 'night') {
                document.body.classList.add('night-mode');
                dayNightBtn.innerHTML = '<i class="fas fa-sun"></i>';
                dayNightBtn.title = "Switch to Day Mode";
                dayNightBtn.classList.add('active');
                isNightMode = true;
            }
        }

        // Set the password to your custom password
        const correctPassword = "IIIVIIIVXIIXIXIXV"; // Changed from "birthday"

        // State variables
        let isNightMode = false;
        let candlesLit = 0;
        const totalCandles = 5; // 5 birthday candles

        // Initialize candles on password screen
        function createPasswordCandles() {
            passwordCandles.innerHTML = '';
            for (let i = 0; i < totalCandles; i++) {
                const candle = document.createElement('div');
                candle.className = 'password-candle';
                candle.innerHTML = '<div class="password-flame"></div>';
                passwordCandles.appendChild(candle);
            }
        }

        // Light up candles based on password input
        function updateCandles() {
            const passwordValue = passwordInput.value;
            const candles = document.querySelectorAll('.password-candle');

            // Calculate how many candles should be lit based on password length
            const targetLitCandles = Math.min(Math.floor((passwordValue.length / correctPassword.length) * totalCandles), totalCandles);

            // Light up or turn off candles
            candles.forEach((candle, index) => {
                if (index < targetLitCandles) {
                    candle.classList.add('lit');
                } else {
                    candle.classList.remove('lit');
                }
            });

            candlesLit = targetLitCandles;

            // If password is correct, all candles will be lit
            return passwordValue === correctPassword;
        }

        // Initialize page
        function initPage() {
            // Set time-based greeting
            setTimeGreeting();

            // Create candles
            createPasswordCandles();

            // Hide controls panel initially
            controlsPanel.style.display = 'none';

            // Focus on password input
            passwordInput.focus();

            // Update time indicator every minute
            setInterval(() => {
                timeIndicator.textContent = updateTimeIndicator();
            }, 60000);
        }

        // Listen for password input changes
        passwordInput.addEventListener('input', function () {
            updateCandles();
        });

        passwordForm.addEventListener('submit', function (e) {
            e.preventDefault();
            const enteredPassword = passwordInput.value.trim();

            if (enteredPassword === correctPassword) {
                // Light all candles for a moment before proceeding
                const candles = document.querySelectorAll('.password-candle');
                candles.forEach(candle => {
                    candle.classList.add('lit');
                });

                // Wait a moment to show all candles lit, then proceed
                setTimeout(() => {
                    // Correct password - hide password screen
                    passwordScreen.classList.add('hidden');

                    // Show controls panel
                    controlsPanel.style.display = 'flex';

                    // After a short delay, trigger scroll unrolling
                    setTimeout(() => {
                        scroll.classList.add('unrolled');

                        // Start playing background music
                        playBackgroundMusic();
                    }, 500);
                }, 800);
            } else {
                // Incorrect password - show error
                errorMessage.textContent = "The word thou hast spoken is false. Speak once more.";

                // Make candles flicker (error indication)
                const candles = document.querySelectorAll('.password-candle');
                candles.forEach(candle => {
                    candle.style.animation = 'shake 0.5s';
                });

                setTimeout(() => {
                    candles.forEach(candle => {
                        candle.style.animation = '';
                    });
                }, 500);

                passwordInput.value = '';
                passwordInput.focus();

                // Reset candles
                updateCandles();

                // Shake animation for wrong password
                passwordForm.style.animation = 'shake 0.5s';
                setTimeout(() => {
                    passwordForm.style.animation = '';
                }, 500);
            }
        });

        // Background music functionality
        function playBackgroundMusic() {
            backgroundMusic.volume = 0.4; // Lower volume for background music

            // Try to play music
            const playPromise = backgroundMusic.play();

            if (playPromise !== undefined) {
                playPromise.catch(error => {
                    console.log("Auto-play prevented");
                    // We'll just let it fail silently since there's no toggle
                });
            }
        }

        // Day/Night mode toggle
        dayNightBtn.addEventListener('click', function () {
            isNightMode = !isNightMode;
            document.body.classList.toggle('night-mode', isNightMode);

            // Update button icon
            if (isNightMode) {
                dayNightBtn.innerHTML = '<i class="fas fa-sun"></i>';
                dayNightBtn.title = "Switch to Day Mode";
                dayNightBtn.classList.add('active');
            } else {
                dayNightBtn.innerHTML = '<i class="fas fa-moon"></i>';
                dayNightBtn.title = "Switch to Night Mode";
                dayNightBtn.classList.remove('active');
            }
        });

        // Share functionality
        shareBtn.addEventListener('click', function () {
            shareModal.classList.add('active');
        });

        closeShare.addEventListener('click', function () {
            shareModal.classList.remove('active');
        });

        // Close modal when clicking outside
        shareModal.addEventListener('click', function (e) {
            if (e.target === shareModal) {
                shareModal.classList.remove('active');
            }
        });

        // Share buttons functionality
        const pageTitle = "Ancient Birthday Scroll";
        const pageUrl = window.location.href;
        const shareText = "Check out this beautiful ancient birthday scroll celebration! üéÇüéâ";

        // Instagram sharing
        shareInstagram.addEventListener('click', function () {
            const instagramMessage = `${shareText}\n\n${pageUrl}`;

            // Copy to clipboard for Instagram
            navigator.clipboard.writeText(instagramMessage).then(function () {
                copyMessage.textContent = "Message copied! Open Instagram to share it.";
                setTimeout(() => {
                    copyMessage.textContent = "";
                }, 3000);

                // Optionally open Instagram in a new tab
                window.open('https://www.instagram.com/', '_blank');
            }, function () {
                // Fallback for older browsers
                const textArea = document.createElement("textarea");
                textArea.value = instagramMessage;
                document.body.appendChild(textArea);
                textArea.select();
                document.execCommand("copy");
                document.body.removeChild(textArea);
                copyMessage.textContent = "Message copied! Open Instagram to share it.";
                setTimeout(() => {
                    copyMessage.textContent = "";
                }, 3000);
            });
        });

        // Snapchat sharing
        shareSnapchat.addEventListener('click', function () {
            const snapchatText = encodeURIComponent(shareText);
            const snapchatUrl = `https://www.snapchat.com/scan?attachmentUrl=${encodeURIComponent(pageUrl)}`;

            // Try to open Snapchat app or website
            window.open(snapchatUrl, '_blank', 'width=600,height=400');

            copyMessage.textContent = "Opening Snapchat...";
            setTimeout(() => {
                copyMessage.textContent = "";
            }, 2000);
        });

        shareWhatsApp.addEventListener('click', function () {
            const whatsappUrl = `https://wa.me/?text=${encodeURIComponent(shareText + ' ' + pageUrl)}`;
            window.open(whatsappUrl, '_blank', 'width=600,height=400');
        });

        copyLink.addEventListener('click', function () {
            navigator.clipboard.writeText(pageUrl).then(function () {
                copyMessage.textContent = "Link copied to clipboard!";
                setTimeout(() => {
                    copyMessage.textContent = "";
                }, 3000);
            }, function () {
                // Fallback for older browsers
                const textArea = document.createElement("textarea");
                textArea.value = pageUrl;
                document.body.appendChild(textArea);
                textArea.select();
                document.execCommand("copy");
                document.body.removeChild(textArea);
                copyMessage.textContent = "Link copied to clipboard!";
                setTimeout(() => {
                    copyMessage.textContent = "";
                }, 3000);
            });
        });

        // Add CSS for shake animation
        const style = document.createElement('style');
        style.textContent = `
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
            20%, 40%, 60%, 80% { transform: translateX(5px); }
        }
    `;
        document.head.appendChild(style);

        // Initialize the page when loaded
        window.addEventListener('load', initPage);
    </script>
</body>

</html>



